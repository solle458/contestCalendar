# 技術選定書 - 競技プログラミングコンテストカレンダー同期サービス

## 目的

本書は、「AtCoder、Codeforces、OMC などの競技プログラミングコンテストを Google カレンダーに自動登録する Web サービス」の技術スタックを選定するための指針を示します。スケーラビリティ、保守性、セキュリティ、開発効率を考慮して決定しました。

---

## フロントエンド

| 項目 | 技術 | 理由 |
|------|------|------|
| フレームワーク | **Next.js 14（App Router）** | SSR/CSR両対応。Google認証との親和性が高く、Vercelとの連携も容易。 |
| 言語 | **TypeScript** | 型安全なコードにより保守性とバグ耐性が向上。 |
| UI ライブラリ | **Tailwind CSS** + **shadcn/ui** | デザイン効率と一貫性を確保しつつ、カスタマイズも容易。 |
| 認証 | **NextAuth.js** | Google OAuth2.0 連携が容易。セッション管理も自動化されている。 |
| 状態管理 | **React Hooks** | シンプルな状態管理で十分な規模のアプリケーション。 |

---

## バックエンド

| 項目 | 技術 | 理由 |
|------|------|------|
| フレームワーク | **FastAPI** | 高速で型安全なAPIフレームワーク。自動ドキュメント生成機能も便利。 |
| 言語 | **Python 3.11+** | 豊富なライブラリと開発効率の高さ。Google API連携も容易。 |
| ORM | **SQLAlchemy** | 柔軟で強力なPythonのORM。複雑なクエリも記述可能。 |
| マイグレーション | **Alembic** | SQLAlchemyと連携したマイグレーション管理ツール。 |
| バリデーション | **Pydantic** | 型チェックとバリデーションを統合。FastAPIとの親和性が高い。 |
| Google連携 | **Google API Client Library for Python** | Google公式。認証からカレンダー操作まで対応。 |

---

## データ取得処理（オンラインジャッジ）

| 対象サイト | 手法 | 備考 |
|-------------|------|------|
| Codeforces | **公式 API** | REST API 提供あり。定期的に呼び出してコンテスト情報を取得。 |
| AtCoder | **スクレイピング（BeautifulSoup / requests）** | API 非公開のため HTML 解析が必要。レート制限や変更に注意。 |
| OMC | **個別対応** | コンテスト情報取得方法を調査の上、実装方針を決定。 |

---

## データベース

| 項目 | 技術 | 理由 |
|------|------|------|
| RDBMS | **PostgreSQL** | 高機能でオープンソース。JSON対応や豊富な機能を持つ。 |
| ORM | **SQLAlchemy** | Pythonとの親和性が高く、柔軟なクエリ記述が可能。 |
| マイグレーション | **Alembic** | SQLAlchemyと連携して使用する標準的なマイグレーションツール。 |

---

## ホスティング・デプロイ

| 項目 | 技術 | 理由 |
|------|------|------|
| フロントエンド | **Vercel** | Next.jsとシームレス。自動デプロイやPreview Deploy対応。 |
| バックエンド | **Docker + クラウドサービス** | コンテナ化によりどの環境でも同じ動作を保証。 |
| データベース | **クラウドサービスのマネージドDB** | 運用負荷を軽減し、スケーラビリティを確保。 |

---

## CI / CD

| 項目 | 技術 | 理由 |
|------|------|------|
| 継続的インテグレーション | **GitHub Actions** | コミットごとのテスト・ビルド・デプロイを自動化。 |
| バージョン管理 | **Git + GitHub** | チーム開発や公開にも対応。 |

---

## 開発支援ツール

| 項目 | 技術 | 理由 |
|------|------|------|
| エラーログ管理 | **カスタムロガー / Sentry（将来拡張）** | 本番環境の監視・トラブル対応に有効。 |
| フォーマット | **ESLint + Prettier（フロントエンド）** | コードスタイルの統一。 |
| フォーマット | **Black + isort（バックエンド）** | Pythonコードのフォーマット統一。 |

---

## 今後の拡張性を考慮した候補

- **通知Bot連携（Discord / LINE）**
- **他OJ対応（TopCoder, LeetCode, yukicoder など）**
- **ICSファイルの生成・配布**
- **PWA対応によるモバイル最適化**

---

## 現在の技術構成まとめ

| 項目 | 技術 |
|------|------|
| フロント | Next.js 14（TypeScript）+ TailwindCSS + shadcn/ui + NextAuth.js |
| バックエンド | FastAPI（Python 3.11+）+ SQLAlchemy + Alembic |
| データベース | PostgreSQL |
| Google連携 | Google API Client Library for Python |
| ホスティング | Vercel（フロントエンド）+ Docker（バックエンド） |
| CI/CD | GitHub Actions |

---
