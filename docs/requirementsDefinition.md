# 要件定義書 - 競技プログラミングコンテスト Googleカレンダー同期サービス

## 1. サービス概要

本サービスは、競技プログラミングサイト（AtCoder、Codeforces、OMCなど）で開催されるコンテストのスケジュールを自動で取得し、ユーザーのGoogleカレンダーに予定として登録・同期するWebアプリケーションです。  
競技プログラミングに参加するユーザーが、各種サイトを巡回することなく効率よくスケジュールを管理できるよう支援します。

---

## 2. 対象ユーザー

- 競技プログラミングに参加しているエンジニア・学生・研究者など
- 複数のオンラインジャッジ（OJ）を利用しているユーザー
- コンテストスケジュールの管理に手間を感じている人

---

## 3. 対応オンラインジャッジ（OJ）

初期対応予定：
- AtCoder（https://atcoder.jp/）
- Codeforces（https://codeforces.com/）
- OMC（Online Marathon Contests など）※仕様調査中

今後の拡張候補：
- TopCoder
- LeetCode
- yukicoder
- CSAcademy など

---

## 4. 機能一覧

### 4.1 ユーザー向け機能（フロントエンド）

| 機能名 | 概要 |
|--------|------|
| Googleアカウント連携 | OAuth2.0 による Google カレンダー連携認証 |
| カレンダー選択 | 登録先のGoogleカレンダーを選択可能 |
| 対象OJの選択 | 同期対象とするOJのON/OFF選択 |
| 通知設定 | コンテストの通知時間を事前に設定（例：30分前通知） |
| 手動同期 | ボタンを押して即時同期を実行 |
| 同期履歴表示 | 過去に同期したイベント一覧を表示（任意） |

---

### 4.2 バックエンド処理

| 処理名 | 概要 |
|--------|------|
| OJデータ取得 | 各OJからAPIでコンテストデータを取得 |
| イベント整形 | コンテスト情報をGoogleカレンダー形式に変換（日時、URL、説明など） |
| イベント登録 | Google Calendar APIを使って予定を作成／更新 |
| 重複検出 | 同一イベントが複数登録されないように識別情報を保持 |
| 定期バッチ処理 | スケジューラで定期的（例：1時間おき）に同期処理を実行 |
| トークン管理 | Googleアクセストークン・リフレッシュトークンの安全な保存と更新 |

---

## 5. 非機能要件（NFR）

| 項目 | 内容 |
|------|------|
| ユーザビリティ | シンプルなUI／カレンダー同期状態が直感的に分かる |
| パフォーマンス | 同期処理は1分以内、初回同期は10秒以内 |
| スケーラビリティ | 1000ユーザー以上が同時に利用しても処理に遅延が出ない |
| セキュリティ | OAuth2.0による認証・HTTPS通信・トークン暗号化保存 |
| 保守性 | サイト構成やAPI変更に備えた柔軟な構造 |
| ロギング／監視 | エラーや処理状態を確認できるログ機構を整備 |

---

## 6. 技術スタック（想定）

| 種別 | 技術候補 |
|------|----------|
| フロントエンド | React（Next.js）+ TypeScript |
| バックエンド | Node.js（Express） or Python（Flask/FastAPI） |
| スケジューラ | GitHub Actions / Cloud Scheduler / Cron |
| 認証 | Google OAuth 2.0 |
| カレンダーAPI | Google Calendar API v3 |
| データベース | Firestore / Supabase / PostgreSQL（ユーザー・設定・ログ管理） |
| ホスティング | Vercel / Firebase / Render / Railway など |
| CI/CD | GitHub Actions or Vercel Deploy Hooks |

---

## 7. MVP（最小実行可能プロダクト）

以下の機能を優先して開発・提供します。

- Google認証とアクセストークンの取得
- Codeforces / AtCoder からのコンテスト情報取得
- Googleカレンダーへの予定登録
- 重複登録防止機構
- 定期的な同期処理（cronまたはスケジューラ）

---

## 8. 今後の拡張案

- 他OJの追加（LeetCode, TopCoder 等）
- Discord/LINE Botへの通知機能
- モバイル対応PWA
- ICS形式エクスポート
- 複数アカウント対応
- チームやグループでのカレンダー共有

---


## 9. 補足

- 商用展開の可能性がある場合は、Google APIの利用制限とQuota申請に注意。
- AtCoderは公式APIがないため、スクレイピング時の規約確認が必要。

